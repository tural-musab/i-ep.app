{"version":3,"sources":["/Users/turanmusabosman/Projects/i-ep.app/src/lib/api/users.ts"],"sourcesContent":["/**\n * Kullanıcı tipi\n */\nexport interface User {\n  id: string;\n  full_name: string;\n  email: string;\n  role: string;\n  avatar_url: string | null;\n  last_login: string | null;\n  created_at?: string;\n}\n\n/**\n * Yeni kullanıcı oluşturmak için tip\n */\nexport interface CreateUserInput {\n  full_name: string;\n  email: string;\n  role: string;\n  phone?: string;\n}\n\n/**\n * API hata sınıfı\n */\nexport class ApiError extends Error {\n  statusCode: number;\n\n  constructor(message: string, statusCode: number = 500) {\n    super(message);\n    this.statusCode = statusCode;\n    this.name = 'ApiError';\n  }\n}\n\n/**\n * Tüm kullanıcıları getir\n */\nexport async function fetchUsers(role?: string): Promise<User[]> {\n  try {\n    const url = new URL('/api/v1/users', window.location.origin);\n\n    if (role) {\n      url.searchParams.append('role', role);\n    }\n\n    const response = await fetch(url.toString());\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new ApiError(\n        errorData.error || 'Kullanıcılar getirilirken bir hata oluştu',\n        response.status\n      );\n    }\n\n    return await response.json();\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    throw new ApiError('Kullanıcılar getirilirken bir hata oluştu');\n  }\n}\n\n/**\n * Kullanıcı oluştur\n */\nexport async function createUser(userData: CreateUserInput): Promise<User> {\n  try {\n    const response = await fetch('/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(userData),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new ApiError(\n        errorData.error || 'Kullanıcı oluşturulurken bir hata oluştu',\n        response.status\n      );\n    }\n\n    return await response.json();\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    throw new ApiError('Kullanıcı oluşturulurken bir hata oluştu');\n  }\n}\n\n/**\n * Kullanıcı bilgilerini güncelle\n */\nexport async function updateUser(id: string, userData: Partial<CreateUserInput>): Promise<User> {\n  try {\n    const response = await fetch(`/api/v1/users/${id}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(userData),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new ApiError(\n        errorData.error || 'Kullanıcı güncellenirken bir hata oluştu',\n        response.status\n      );\n    }\n\n    return await response.json();\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    throw new ApiError('Kullanıcı güncellenirken bir hata oluştu');\n  }\n}\n\n/**\n * Kullanıcı sil\n */\nexport async function deleteUser(id: string): Promise<void> {\n  try {\n    const response = await fetch(`/api/v1/users/${id}`, {\n      method: 'DELETE',\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new ApiError(\n        errorData.error || 'Kullanıcı silinirken bir hata oluştu',\n        response.status\n      );\n    }\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    throw new ApiError('Kullanıcı silinirken bir hata oluştu');\n  }\n}\n"],"names":["ApiError","createUser","deleteUser","fetchUsers","updateUser","Error","constructor","message","statusCode","name","role","url","URL","window","location","origin","searchParams","append","response","fetch","toString","ok","errorData","json","error","status","userData","method","headers","body","JSON","stringify","id"],"mappings":"AAAA;;CAEC;;;;;;;;;;;IAwBYA,QAAQ;eAARA;;IA2CSC,UAAU;eAAVA;;IA4DAC,UAAU;eAAVA;;IA1FAC,UAAU;eAAVA;;IA4DAC,UAAU;eAAVA;;;AAzEf,MAAMJ,iBAAiBK;IAG5BC,YAAYC,OAAe,EAAEC,aAAqB,GAAG,CAAE;QACrD,KAAK,CAACD;QACN,IAAI,CAACC,UAAU,GAAGA;QAClB,IAAI,CAACC,IAAI,GAAG;IACd;AACF;AAKO,eAAeN,WAAWO,IAAa;IAC5C,IAAI;QACF,MAAMC,MAAM,IAAIC,IAAI,iBAAiBC,OAAOC,QAAQ,CAACC,MAAM;QAE3D,IAAIL,MAAM;YACRC,IAAIK,YAAY,CAACC,MAAM,CAAC,QAAQP;QAClC;QAEA,MAAMQ,WAAW,MAAMC,MAAMR,IAAIS,QAAQ;QAEzC,IAAI,CAACF,SAASG,EAAE,EAAE;YAChB,MAAMC,YAAY,MAAMJ,SAASK,IAAI;YACrC,MAAM,IAAIvB,SACRsB,UAAUE,KAAK,IAAI,6CACnBN,SAASO,MAAM;QAEnB;QAEA,OAAO,MAAMP,SAASK,IAAI;IAC5B,EAAE,OAAOC,OAAO;QACd,IAAIA,iBAAiBxB,UAAU;YAC7B,MAAMwB;QACR;QACA,MAAM,IAAIxB,SAAS;IACrB;AACF;AAKO,eAAeC,WAAWyB,QAAyB;IACxD,IAAI;QACF,MAAMR,WAAW,MAAMC,MAAM,iBAAiB;YAC5CQ,QAAQ;YACRC,SAAS;gBACP,gBAAgB;YAClB;YACAC,MAAMC,KAAKC,SAAS,CAACL;QACvB;QAEA,IAAI,CAACR,SAASG,EAAE,EAAE;YAChB,MAAMC,YAAY,MAAMJ,SAASK,IAAI;YACrC,MAAM,IAAIvB,SACRsB,UAAUE,KAAK,IAAI,4CACnBN,SAASO,MAAM;QAEnB;QAEA,OAAO,MAAMP,SAASK,IAAI;IAC5B,EAAE,OAAOC,OAAO;QACd,IAAIA,iBAAiBxB,UAAU;YAC7B,MAAMwB;QACR;QACA,MAAM,IAAIxB,SAAS;IACrB;AACF;AAKO,eAAeI,WAAW4B,EAAU,EAAEN,QAAkC;IAC7E,IAAI;QACF,MAAMR,WAAW,MAAMC,MAAM,CAAC,cAAc,EAAEa,IAAI,EAAE;YAClDL,QAAQ;YACRC,SAAS;gBACP,gBAAgB;YAClB;YACAC,MAAMC,KAAKC,SAAS,CAACL;QACvB;QAEA,IAAI,CAACR,SAASG,EAAE,EAAE;YAChB,MAAMC,YAAY,MAAMJ,SAASK,IAAI;YACrC,MAAM,IAAIvB,SACRsB,UAAUE,KAAK,IAAI,4CACnBN,SAASO,MAAM;QAEnB;QAEA,OAAO,MAAMP,SAASK,IAAI;IAC5B,EAAE,OAAOC,OAAO;QACd,IAAIA,iBAAiBxB,UAAU;YAC7B,MAAMwB;QACR;QACA,MAAM,IAAIxB,SAAS;IACrB;AACF;AAKO,eAAeE,WAAW8B,EAAU;IACzC,IAAI;QACF,MAAMd,WAAW,MAAMC,MAAM,CAAC,cAAc,EAAEa,IAAI,EAAE;YAClDL,QAAQ;QACV;QAEA,IAAI,CAACT,SAASG,EAAE,EAAE;YAChB,MAAMC,YAAY,MAAMJ,SAASK,IAAI;YACrC,MAAM,IAAIvB,SACRsB,UAAUE,KAAK,IAAI,wCACnBN,SAASO,MAAM;QAEnB;IACF,EAAE,OAAOD,OAAO;QACd,IAAIA,iBAAiBxB,UAAU;YAC7B,MAAMwB;QACR;QACA,MAAM,IAAIxB,SAAS;IACrB;AACF"}