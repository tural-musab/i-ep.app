efe20aa30d7a66f286ec5d8eaa767ae9
var _defineProperty = require("@babel/runtime/helpers/defineProperty");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
/* eslint-disable @typescript-eslint/no-require-imports */
/**
 * İ-EP.APP - Integration Test Utilities & Setup
 * Gerçek database ve Redis bağlantıları için test setup utilities
 */

const {
  createClient
} = require('@supabase/supabase-js');

/**
 * Integration Test Data Manager
 * Gerçek database ile clean fixtures için test data yönetimi
 */
class IntegrationTestManager {
  constructor() {
    this.supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
    this.testTenantId = process.env.TEST_TENANT_ID;
    this.cleanupTasks = [];
  }

  /**
   * Test tenant için clean environment hazırlar
   */
  async setupTestEnvironment() {
    console.log('🧹 Setting up clean test environment...');

    // Clean existing test data
    await this.cleanupTestData();

    // Create test tenant if not exists
    await this.ensureTestTenant();
    console.log('✅ Test environment ready');
  }

  /**
   * Test sonrası cleanup yapar
   */
  async cleanupTestEnvironment() {
    console.log('🧹 Cleaning up test environment...');

    // Execute all cleanup tasks
    for (const cleanup of this.cleanupTasks) {
      try {
        await cleanup();
      } catch (error) {
        console.warn('⚠️  Cleanup task failed:', error.message);
      }
    }

    // Final cleanup of test data
    await this.cleanupTestData();
    console.log('✅ Test environment cleaned');
  }

  /**
   * Test tenant'ın var olduğundan emin olur
   */
  async ensureTestTenant() {
    if (!this.testTenantId) {
      throw new Error('TEST_TENANT_ID environment variable is required');
    }
    const {
      data: existingTenant
    } = await this.supabase.from('tenants').select('id').eq('id', this.testTenantId).single();
    if (!existingTenant) {
      const {
        error
      } = await this.supabase.from('tenants').insert({
        id: this.testTenantId,
        name: 'Test School',
        subdomain: 'test-school',
        domain: 'test.i-ep.app',
        status: 'active',
        settings: {
          locale: 'tr',
          timezone: 'Europe/Istanbul',
          academic_year: '2024-2025'
        }
      });
      if (error) {
        console.warn('⚠️  Could not create test tenant:', error.message);
      } else {
        console.log('✅ Test tenant created');
      }
    }
  }

  /**
   * Test data'yı temizler
   */
  async cleanupTestData() {
    const tables = ['grade_comments', 'grades', 'attendance_records', 'assignments', 'users', 'classes', 'subjects'];
    for (const table of tables) {
      try {
        const {
          error
        } = await this.supabase.from(table).delete().eq('tenant_id', this.testTenantId);
        if (error && !error.message.includes('does not exist')) {
          console.warn(`⚠️  Could not clean ${table}:`, error.message);
        }
      } catch (err) {
        // Table might not exist yet, ignore
      }
    }
  }

  /**
   * Test user oluşturur ve cleanup task ekler
   */
  async createTestUser(userData = {}) {
    const defaultUser = _objectSpread({
      id: `test-user-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      email: `test-${Date.now()}@i-ep.app`,
      tenant_id: this.testTenantId,
      role: 'student',
      name: 'Test User',
      created_at: new Date().toISOString(),
      updated_at: new Date().toISOString()
    }, userData);
    const {
      data,
      error
    } = await this.supabase.from('users').insert(defaultUser).select().single();
    if (error) {
      throw new Error(`Failed to create test user: ${error.message}`);
    }

    // Add cleanup task
    this.cleanupTasks.push(async () => {
      await this.supabase.from('users').delete().eq('id', data.id);
    });
    return data;
  }

  /**
   * Test class oluşturur
   */
  async createTestClass(classData = {}) {
    const defaultClass = _objectSpread({
      id: `test-class-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      tenant_id: this.testTenantId,
      name: 'Test Sınıfı',
      grade_level: 9,
      academic_year: '2024-2025',
      created_at: new Date().toISOString(),
      updated_at: new Date().toISOString()
    }, classData);
    const {
      data,
      error
    } = await this.supabase.from('classes').insert(defaultClass).select().single();
    if (error) {
      throw new Error(`Failed to create test class: ${error.message}`);
    }

    // Add cleanup task
    this.cleanupTasks.push(async () => {
      await this.supabase.from('classes').delete().eq('id', data.id);
    });
    return data;
  }

  /**
   * Test assignment oluşturur
   */
  async createTestAssignment(assignmentData = {}) {
    const defaultAssignment = _objectSpread({
      id: `test-assignment-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      tenant_id: this.testTenantId,
      title: 'Test Ödevi',
      description: 'Bu bir test ödevi açıklamasıdır',
      due_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
      // 1 week from now
      status: 'active',
      created_at: new Date().toISOString(),
      updated_at: new Date().toISOString()
    }, assignmentData);
    const {
      data,
      error
    } = await this.supabase.from('assignments').insert(defaultAssignment).select().single();
    if (error) {
      throw new Error(`Failed to create test assignment: ${error.message}`);
    }

    // Add cleanup task
    this.cleanupTasks.push(async () => {
      await this.supabase.from('assignments').delete().eq('id', data.id);
    });
    return data;
  }

  /**
   * Database bağlantısını test eder
   */
  async testDatabaseConnection() {
    try {
      const {
        data,
        error
      } = await this.supabase.from('tenants').select('id').limit(1);
      return {
        success: !error,
        error: error?.message
      };
    } catch (err) {
      return {
        success: false,
        error: err.message
      };
    }
  }

  /**
   * Redis bağlantısını test eder
   */
  async testRedisConnection() {
    try {
      const {
        Redis
      } = require('@upstash/redis');
      const redis = new Redis({
        url: process.env.REDIS_URL || process.env.UPSTASH_REDIS_URL,
        token: process.env.UPSTASH_REDIS_TOKEN || 'test-token'
      });
      const testKey = `integration-test-${Date.now()}`;
      await redis.set(testKey, 'test-value', {
        ex: 5
      });
      const result = await redis.get(testKey);
      await redis.del(testKey);
      return {
        success: result === 'test-value',
        error: result !== 'test-value' ? 'Redis read/write test failed' : null
      };
    } catch (err) {
      return {
        success: false,
        error: err.message
      };
    }
  }
}

// Global instance for use in tests
global.testManager = new IntegrationTestManager();

// Export for direct imports
module.exports = {
  IntegrationTestManager,
  testManager: global.testManager
};
console.log('🔧 Integration test utilities loaded');
console.log('🎯 TestManager available globally as testManager');
console.log('📊 Clean fixtures and database utilities ready');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJyZXF1aXJlIiwiSW50ZWdyYXRpb25UZXN0TWFuYWdlciIsImNvbnN0cnVjdG9yIiwic3VwYWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsInRlc3RUZW5hbnRJZCIsIlRFU1RfVEVOQU5UX0lEIiwiY2xlYW51cFRhc2tzIiwic2V0dXBUZXN0RW52aXJvbm1lbnQiLCJjb25zb2xlIiwibG9nIiwiY2xlYW51cFRlc3REYXRhIiwiZW5zdXJlVGVzdFRlbmFudCIsImNsZWFudXBUZXN0RW52aXJvbm1lbnQiLCJjbGVhbnVwIiwiZXJyb3IiLCJ3YXJuIiwibWVzc2FnZSIsIkVycm9yIiwiZGF0YSIsImV4aXN0aW5nVGVuYW50IiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiaW5zZXJ0IiwiaWQiLCJuYW1lIiwic3ViZG9tYWluIiwiZG9tYWluIiwic3RhdHVzIiwic2V0dGluZ3MiLCJsb2NhbGUiLCJ0aW1lem9uZSIsImFjYWRlbWljX3llYXIiLCJ0YWJsZXMiLCJ0YWJsZSIsImRlbGV0ZSIsImluY2x1ZGVzIiwiZXJyIiwiY3JlYXRlVGVzdFVzZXIiLCJ1c2VyRGF0YSIsImRlZmF1bHRVc2VyIiwiX29iamVjdFNwcmVhZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJlbWFpbCIsInRlbmFudF9pZCIsInJvbGUiLCJjcmVhdGVkX2F0IiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwicHVzaCIsImNyZWF0ZVRlc3RDbGFzcyIsImNsYXNzRGF0YSIsImRlZmF1bHRDbGFzcyIsImdyYWRlX2xldmVsIiwiY3JlYXRlVGVzdEFzc2lnbm1lbnQiLCJhc3NpZ25tZW50RGF0YSIsImRlZmF1bHRBc3NpZ25tZW50IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZV9kYXRlIiwidGVzdERhdGFiYXNlQ29ubmVjdGlvbiIsImxpbWl0Iiwic3VjY2VzcyIsInRlc3RSZWRpc0Nvbm5lY3Rpb24iLCJSZWRpcyIsInJlZGlzIiwidXJsIiwiUkVESVNfVVJMIiwiVVBTVEFTSF9SRURJU19VUkwiLCJ0b2tlbiIsIlVQU1RBU0hfUkVESVNfVE9LRU4iLCJ0ZXN0S2V5Iiwic2V0IiwiZXgiLCJyZXN1bHQiLCJnZXQiLCJkZWwiLCJnbG9iYWwiLCJ0ZXN0TWFuYWdlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJpbnRlZ3JhdGlvbi10ZXN0LXNldHVwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMgKi9cbi8qKlxuICogxLAtRVAuQVBQIC0gSW50ZWdyYXRpb24gVGVzdCBVdGlsaXRpZXMgJiBTZXR1cFxuICogR2Vyw6dlayBkYXRhYmFzZSB2ZSBSZWRpcyBiYcSfbGFudMSxbGFyxLEgacOnaW4gdGVzdCBzZXR1cCB1dGlsaXRpZXNcbiAqL1xuXG5jb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJyk7XG5cbi8qKlxuICogSW50ZWdyYXRpb24gVGVzdCBEYXRhIE1hbmFnZXJcbiAqIEdlcsOnZWsgZGF0YWJhc2UgaWxlIGNsZWFuIGZpeHR1cmVzIGnDp2luIHRlc3QgZGF0YSB5w7ZuZXRpbWlcbiAqL1xuY2xhc3MgSW50ZWdyYXRpb25UZXN0TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXG4gICAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZXG4gICAgKTtcbiAgICB0aGlzLnRlc3RUZW5hbnRJZCA9IHByb2Nlc3MuZW52LlRFU1RfVEVOQU5UX0lEO1xuICAgIHRoaXMuY2xlYW51cFRhc2tzID0gW107XG4gIH1cblxuICAvKipcbiAgICogVGVzdCB0ZW5hbnQgacOnaW4gY2xlYW4gZW52aXJvbm1lbnQgaGF6xLFybGFyXG4gICAqL1xuICBhc3luYyBzZXR1cFRlc3RFbnZpcm9ubWVudCgpIHtcbiAgICBjb25zb2xlLmxvZygn8J+nuSBTZXR0aW5nIHVwIGNsZWFuIHRlc3QgZW52aXJvbm1lbnQuLi4nKTtcbiAgICBcbiAgICAvLyBDbGVhbiBleGlzdGluZyB0ZXN0IGRhdGFcbiAgICBhd2FpdCB0aGlzLmNsZWFudXBUZXN0RGF0YSgpO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0ZXN0IHRlbmFudCBpZiBub3QgZXhpc3RzXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVUZXN0VGVuYW50KCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBUZXN0IGVudmlyb25tZW50IHJlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBzb25yYXPEsSBjbGVhbnVwIHlhcGFyXG4gICAqL1xuICBhc3luYyBjbGVhbnVwVGVzdEVudmlyb25tZW50KCkge1xuICAgIGNvbnNvbGUubG9nKCfwn6e5IENsZWFuaW5nIHVwIHRlc3QgZW52aXJvbm1lbnQuLi4nKTtcbiAgICBcbiAgICAvLyBFeGVjdXRlIGFsbCBjbGVhbnVwIHRhc2tzXG4gICAgZm9yIChjb25zdCBjbGVhbnVwIG9mIHRoaXMuY2xlYW51cFRhc2tzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyAgQ2xlYW51cCB0YXNrIGZhaWxlZDonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRmluYWwgY2xlYW51cCBvZiB0ZXN0IGRhdGFcbiAgICBhd2FpdCB0aGlzLmNsZWFudXBUZXN0RGF0YSgpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgVGVzdCBlbnZpcm9ubWVudCBjbGVhbmVkJyk7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCB0ZW5hbnQnxLFuIHZhciBvbGR1xJ91bmRhbiBlbWluIG9sdXJcbiAgICovXG4gIGFzeW5jIGVuc3VyZVRlc3RUZW5hbnQoKSB7XG4gICAgaWYgKCF0aGlzLnRlc3RUZW5hbnRJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdURVNUX1RFTkFOVF9JRCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdUZW5hbnQgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd0ZW5hbnRzJylcbiAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgIC5lcSgnaWQnLCB0aGlzLnRlc3RUZW5hbnRJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmICghZXhpc3RpbmdUZW5hbnQpIHtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3RlbmFudHMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICBpZDogdGhpcy50ZXN0VGVuYW50SWQsXG4gICAgICAgICAgbmFtZTogJ1Rlc3QgU2Nob29sJyxcbiAgICAgICAgICBzdWJkb21haW46ICd0ZXN0LXNjaG9vbCcsXG4gICAgICAgICAgZG9tYWluOiAndGVzdC5pLWVwLmFwcCcsXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgbG9jYWxlOiAndHInLFxuICAgICAgICAgICAgdGltZXpvbmU6ICdFdXJvcGUvSXN0YW5idWwnLFxuICAgICAgICAgICAgYWNhZGVtaWNfeWVhcjogJzIwMjQtMjAyNSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gIENvdWxkIG5vdCBjcmVhdGUgdGVzdCB0ZW5hbnQ6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFRlc3QgdGVuYW50IGNyZWF0ZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBkYXRhJ3nEsSB0ZW1pemxlclxuICAgKi9cbiAgYXN5bmMgY2xlYW51cFRlc3REYXRhKCkge1xuICAgIGNvbnN0IHRhYmxlcyA9IFtcbiAgICAgICdncmFkZV9jb21tZW50cycsXG4gICAgICAnZ3JhZGVzJywgXG4gICAgICAnYXR0ZW5kYW5jZV9yZWNvcmRzJyxcbiAgICAgICdhc3NpZ25tZW50cycsXG4gICAgICAndXNlcnMnLFxuICAgICAgJ2NsYXNzZXMnLFxuICAgICAgJ3N1YmplY3RzJ1xuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIHRhYmxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKHRhYmxlKVxuICAgICAgICAgIC5kZWxldGUoKVxuICAgICAgICAgIC5lcSgndGVuYW50X2lkJywgdGhpcy50ZXN0VGVuYW50SWQpO1xuXG4gICAgICAgIGlmIChlcnJvciAmJiAhZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZG9lcyBub3QgZXhpc3QnKSkge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBDb3VsZCBub3QgY2xlYW4gJHt0YWJsZX06YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBUYWJsZSBtaWdodCBub3QgZXhpc3QgeWV0LCBpZ25vcmVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGVzdCB1c2VyIG9sdcWfdHVydXIgdmUgY2xlYW51cCB0YXNrIGVrbGVyXG4gICAqL1xuICBhc3luYyBjcmVhdGVUZXN0VXNlcih1c2VyRGF0YSA9IHt9KSB7XG4gICAgY29uc3QgZGVmYXVsdFVzZXIgPSB7XG4gICAgICBpZDogYHRlc3QtdXNlci0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICBlbWFpbDogYHRlc3QtJHtEYXRlLm5vdygpfUBpLWVwLmFwcGAsXG4gICAgICB0ZW5hbnRfaWQ6IHRoaXMudGVzdFRlbmFudElkLFxuICAgICAgcm9sZTogJ3N0dWRlbnQnLFxuICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAuLi51c2VyRGF0YVxuICAgIH07XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLmluc2VydChkZWZhdWx0VXNlcilcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgdGVzdCB1c2VyOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGNsZWFudXAgdGFza1xuICAgIHRoaXMuY2xlYW51cFRhc2tzLnB1c2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAuZGVsZXRlKClcbiAgICAgICAgLmVxKCdpZCcsIGRhdGEuaWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBjbGFzcyBvbHXFn3R1cnVyXG4gICAqL1xuICBhc3luYyBjcmVhdGVUZXN0Q2xhc3MoY2xhc3NEYXRhID0ge30pIHtcbiAgICBjb25zdCBkZWZhdWx0Q2xhc3MgPSB7XG4gICAgICBpZDogYHRlc3QtY2xhc3MtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgdGVuYW50X2lkOiB0aGlzLnRlc3RUZW5hbnRJZCxcbiAgICAgIG5hbWU6ICdUZXN0IFPEsW7EsWbEsScsXG4gICAgICBncmFkZV9sZXZlbDogOSxcbiAgICAgIGFjYWRlbWljX3llYXI6ICcyMDI0LTIwMjUnLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgLi4uY2xhc3NEYXRhXG4gICAgfTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjbGFzc2VzJylcbiAgICAgIC5pbnNlcnQoZGVmYXVsdENsYXNzKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSB0ZXN0IGNsYXNzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGNsZWFudXAgdGFza1xuICAgIHRoaXMuY2xlYW51cFRhc2tzLnB1c2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY2xhc3NlcycpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuZXEoJ2lkJywgZGF0YS5pZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGFzc2lnbm1lbnQgb2x1xZ90dXJ1clxuICAgKi9cbiAgYXN5bmMgY3JlYXRlVGVzdEFzc2lnbm1lbnQoYXNzaWdubWVudERhdGEgPSB7fSkge1xuICAgIGNvbnN0IGRlZmF1bHRBc3NpZ25tZW50ID0ge1xuICAgICAgaWQ6IGB0ZXN0LWFzc2lnbm1lbnQtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgdGVuYW50X2lkOiB0aGlzLnRlc3RUZW5hbnRJZCxcbiAgICAgIHRpdGxlOiAnVGVzdCDDlmRldmknLFxuICAgICAgZGVzY3JpcHRpb246ICdCdSBiaXIgdGVzdCDDtmRldmkgYcOnxLFrbGFtYXPEsWTEsXInLFxuICAgICAgZHVlX2RhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gMSB3ZWVrIGZyb20gbm93XG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgLi4uYXNzaWdubWVudERhdGFcbiAgICB9O1xuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgLmZyb20oJ2Fzc2lnbm1lbnRzJylcbiAgICAgIC5pbnNlcnQoZGVmYXVsdEFzc2lnbm1lbnQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIHRlc3QgYXNzaWdubWVudDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIC8vIEFkZCBjbGVhbnVwIHRhc2tcbiAgICB0aGlzLmNsZWFudXBUYXNrcy5wdXNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2Fzc2lnbm1lbnRzJylcbiAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgIC5lcSgnaWQnLCBkYXRhLmlkKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIERhdGFiYXNlIGJhxJ9sYW50xLFzxLFuxLEgdGVzdCBlZGVyXG4gICAqL1xuICBhc3luYyB0ZXN0RGF0YWJhc2VDb25uZWN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd0ZW5hbnRzJylcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAubGltaXQoMSk7XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6ICFlcnJvciwgZXJyb3I6IGVycm9yPy5tZXNzYWdlIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVyci5tZXNzYWdlIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZGlzIGJhxJ9sYW50xLFzxLFuxLEgdGVzdCBlZGVyXG4gICAqL1xuICBhc3luYyB0ZXN0UmVkaXNDb25uZWN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IFJlZGlzIH0gPSByZXF1aXJlKCdAdXBzdGFzaC9yZWRpcycpO1xuICAgICAgY29uc3QgcmVkaXMgPSBuZXcgUmVkaXMoe1xuICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlJFRElTX1VSTCB8fCBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1VSTCxcbiAgICAgICAgdG9rZW46IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfVE9LRU4gfHwgJ3Rlc3QtdG9rZW4nLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRlc3RLZXkgPSBgaW50ZWdyYXRpb24tdGVzdC0ke0RhdGUubm93KCl9YDtcbiAgICAgIGF3YWl0IHJlZGlzLnNldCh0ZXN0S2V5LCAndGVzdC12YWx1ZScsIHsgZXg6IDUgfSk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWRpcy5nZXQodGVzdEtleSk7XG4gICAgICBhd2FpdCByZWRpcy5kZWwodGVzdEtleSk7XG5cbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiByZXN1bHQgPT09ICd0ZXN0LXZhbHVlJywgXG4gICAgICAgIGVycm9yOiByZXN1bHQgIT09ICd0ZXN0LXZhbHVlJyA/ICdSZWRpcyByZWFkL3dyaXRlIHRlc3QgZmFpbGVkJyA6IG51bGwgXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnIubWVzc2FnZSB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyBHbG9iYWwgaW5zdGFuY2UgZm9yIHVzZSBpbiB0ZXN0c1xuZ2xvYmFsLnRlc3RNYW5hZ2VyID0gbmV3IEludGVncmF0aW9uVGVzdE1hbmFnZXIoKTtcblxuLy8gRXhwb3J0IGZvciBkaXJlY3QgaW1wb3J0c1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEludGVncmF0aW9uVGVzdE1hbmFnZXIsXG4gIHRlc3RNYW5hZ2VyOiBnbG9iYWwudGVzdE1hbmFnZXJcbn07XG5cbmNvbnNvbGUubG9nKCfwn5SnIEludGVncmF0aW9uIHRlc3QgdXRpbGl0aWVzIGxvYWRlZCcpO1xuY29uc29sZS5sb2coJ/Cfjq8gVGVzdE1hbmFnZXIgYXZhaWxhYmxlIGdsb2JhbGx5IGFzIHRlc3RNYW5hZ2VyJyk7XG5jb25zb2xlLmxvZygn8J+TiiBDbGVhbiBmaXh0dXJlcyBhbmQgZGF0YWJhc2UgdXRpbGl0aWVzIHJlYWR5Jyk7Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU07RUFBRUE7QUFBYSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQzs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxzQkFBc0IsQ0FBQztFQUMzQkMsV0FBV0EsQ0FBQSxFQUFHO0lBQ1osSUFBSSxDQUFDQyxRQUFRLEdBQUdKLFlBQVksQ0FDMUJLLE9BQU8sQ0FB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